# 发票管理系统 (前后端分离版)

这是一个轻量级的发票管理系统，采用前后端分离架构，可以方便地上传、解析、管理PDF格式的发票。

-   **Backend**: Flask API 服务器，负责处理ZIP压缩包、解析PDF发票、并使用SQLite数据库进行存储。
-   **Frontend**: 原生 HTML/CSS/JS 静态界面，通过 API 与后端异步通信，提供动态、流畅的用户体验。

---

## ✨ 功能特性

-   **批量上传**: 支持上传包含多张PDF发票的ZIP压缩包。
-   **异步处理**: 文件上传后，后端在后台进行解压和解析，前端通过轮询实时更新处理状态，不阻塞UI。
-   **发票管理**:
    -   **搜索**: 可根据购买方、销售方、发票号码等关键词进行模糊搜索。
    -   **编辑**: 修改发票的关键信息。
    -   **删除**: 从数据库和文件系统中移除单张发票。
-   **数据持久化**: 所有发票信息存储在本地的SQLite数据库中。
-   **文件查看**: 可以直接在浏览器中打开和查看原始的PDF发票文件。

---

## 🚀 运行项目

项目启动非常简单，无需配置复杂的数据库。

### 1. 准备

-   确保您已安装 **Python 3.8+**。

### 2. 运行后端 (Backend)

1.  **进入后端目录:**
    ```bash
    cd backend
    ```

2.  **创建并激活虚拟环境:**
    -   **Windows:**
        ```bash
        python -m venv venv
        venv\Scripts\activate
        ```
    -   **macOS / Linux:**
        ```bash
        python3 -m venv venv
        source venv/bin/activate
        ```

3.  **安装依赖:**
    ```bash
    pip install -r requirements.txt
    ```

4.  **启动后端服务器:**
    ```bash
    python run.py
    ```
    -   服务器将在 `http://127.0.0.1:5000` 运行。
    -   首次运行时，系统会自动在 `backend/instance/` 目录下创建名为 `invoices.db` 的SQLite数据库文件。

### 3. 运行前端 (Frontend)

-   **无需任何构建或服务器**。
-   直接在您的浏览器中打开 `frontend/index.html` 文件即可。
-   前端页面已配置为自动连接到本地运行的后端 API。

---

## 📖 如何使用

1.  **上传发票**:
    -   点击页面顶部的 **"选择文件"** 按钮，选择一个包含PDF发票的 `.zip` 文件。
    -   点击 **"上传"** 按钮。
    -   下方状态栏会显示“处理中...”，并告知正在处理的文件名。处理完成后，状态会更新为“完成”，并显示成功导入和已存在/失败的发票数量。

2.  **浏览和搜索**:
    -   上传的发票会立即显示在下方的表格中。
    -   使用页面右上方的 **搜索框** 输入关键词（如公司名称、发票号码）可以实时筛选列表。

3.  **编辑发票**:
    -   在发票列表中，点击对应行右侧的 **"编辑"** 按钮。
    -   在弹出的窗口中修改信息，然后点击 **"保存更改"**。

4.  **删除发票**:
    -   点击 **"删除"** 按钮，该条记录将从列表和数据库中被移除。

5.  **查看原始PDF**:
    -   点击“文件路径”列下的 **PDF文件名链接**，即可在新标签页中打开和查看原始的发票PDF文件。
